#include "Morse.h"

String setning = "Eitthvad";

Morse dulkodi;

unsigned int t = 100;
unsigned int dotTime = t;
unsigned int dashTime = 3 * t;
unsigned int endwordTime = 7 * t;
unsigned int endCharTime = 5 * t;
int outPin = 13;
unsigned int currentTime;

void setup()
{
	pinMode(outPin, OUTPUT);
	digitalWrite(outPin, LOW);
}

void loop()
{
	String morse;
	for (unsigned int i = 0; i < setning.length(); i++)
	{
		if(setning[i] == ' ')
		{
			currentTime = millis();
			digitalWrite(outPin, HIGH);
			delay(endwordTime);
			digitalWrite(outPin, LOW);
		}
		else
		{
			morse = dulkodi.getChars(setning[i]);
			for (unsigned int j = 0; j < morse.length(); j++)
			{
				if (morse[j] == '.')
				{
					currentTime = millis();
					digitalWrite(outPin, HIGH);
					delay(dotTime);
					digitalWrite(outPin, LOW);
				}
				else if (morse[j] == '-')
				{
					currentTime = millis();
					digitalWrite(outPin, HIGH);
					delay(dashTime);
					digitalWrite(outPin, LOW);
				}
				currentTime = millis();
				digitalWrite(outPin, HIGH);
				delay(dotTime);
				digitalWrite(outPin, LOW);
			}
			currentTime = millis();
			digitalWrite(outPin, HIGH);
			delay(endCharTime);
			digitalWrite(outPin, LOW);
		}
	}
}
